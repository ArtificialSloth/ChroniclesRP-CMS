<script src="https://www.google.com/recaptcha/api.js" async defer></script>
<script>
	$('.add-chapter .types input').change((e) => {
		if (e.target.checked) {
			if (e.target.value == 'hosted') {
				$('.add-chapter .cms').removeClass('disabled');
				$('.add-chapter .nav .next').removeClass('disabled');
				multistepNext($('.add-chapter .nav .next'));
				$('.add-chapter .header').html('type â€º hosted');
			}
		}
	});

	$('.add-chapter').submit((e) => {
		e.preventDefault();
		$('.add-chapter .error').removeClass('active');

		var formData = $(e.target).serialize();
		crpAjax('/api/add-chapter', formData, (res) => {
			if (res._id) {
				if (res.type == 'group' || res.type == 'page') return crpGetPage('/chapters/' + res.slug);

				window.location = res.slug;
			} else {
				$('.add-chapter .error').addClass('active').html(res);
			}
		});
	});
</script>
