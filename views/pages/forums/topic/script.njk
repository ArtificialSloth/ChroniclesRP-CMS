<script>
	function removeReply(replyid) {
		if (window.confirm('Are you sure?')) {
			crpAjax('/api/remove-reply', {replyid: replyid}, (response) => {
				if (response) {
					location.reload();
				}
			});
		}
	}

	$('.new-post form').submit((e) => {
		e.preventDefault();
		tinymce.triggerSave();

		if ($('.new-post .reply').val().length < 4) return $('.new-post .reply-error').html('Reply must be at least 4 characters');

		var formData = $(e.target).serialize();
		crpAjax('/api/new-reply', formData, (response) => {
			if (response == 'bodyLength') {
				return $('.new-post .reply-error').html('Reply must be at least 4 characters');
			} else if (response == 'generic') {
				return $('.new-post .reply-error').html('Something went wrong :(');
			} else {
				location.reload();
			}
		});
	});
</script>
